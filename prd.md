# 产品需求文档 (PRD): LumiRead

**版本:** 1.0
**日期:** 2025年5月26日
**项目负责人:** (待定)
**作者:** Gemini (根据用户需求生成)

## 1. 简介 (Introduction)

### 1.1 文档目的 (Purpose of Document)
本文档旨在明确定义 LumiRead 应用的产品需求。它将作为开发团队设计、构建和测试该应用的基础，确保最终产品符合项目愿景和用户需求。**初期版本将专注于iPad平台。**

### 1.2 产品目标与愿景 (Product Goal and Vision)
LumiRead 旨在成为一款智能文章阅读器，帮助用户高效处理和理解他们从PC端收集并存储在 Google Drive 上的文章。通过AI驱动的文章总结和互动式问答，LumiRead 使用户能够快速掌握文章核心内容，并在需要时深入探索细节，从而提升信息获取和知识内化的效率。其核心灵感来源于 NotebookLM，致力于为用户的个人内容库提供智能化的交互体验。

### 1.3 目标用户 (Target Audience)
本应用初期主要为开发者本人在iPad上使用，旨在满足个人在高效阅读、信息摘要及与内容深度互动方面的需求。

尽管主要为个人设计，但其功能也适用于以下类型的iPad用户：经常阅读大量网络文章，并希望通过AI辅助来提高阅读效率、快速获取信息摘要以及与内容进行深度互动的用户。例如：研究人员、学生、内容创作者、以及任何需要处理大量文本信息进行学习或工作的人。

## 2. 目标与目的 (Goals and Objectives)

### 2.1 用户目标 (User Goals)
* 能够方便地将PC上收集并统一格式化为 `.json` 文件的文章数据导入到iPad设备。
* 能够对选中的文章进行批量总结，并在专门的页面查看结构化的总结报告。
* 当需要查看某篇文章的原文时，能够通过文章链接在浏览器中轻松访问。
* 能够针对单篇文章的原始内容（主要由AI阅读的文本）与AI进行提问和对话，以加深理解或获取特定信息。
* 高效管理导入的文章列表。
* 能够自定义AI交互的参数，如API Key和提示词。

### 2.2 产品目标 (Product Objectives - MVP)
* 成功上线一个稳定、易用的iPad应用，首先满足开发者个人使用需求。
* 提供流畅的文章导入（单一`.json`文件）、AI批量总结（在独立页面展示结构化结果）、针对单篇文章的AI问答核心功能以及基础的自定义设置。
* 验证产品核心价值，并为未来可能的扩展收集反馈。

## 3. 项目范围 (Scope)

### 3.1 核心功能 (In Scope - MVP)
1.  **PC端内容准备 (前提条件):** 用户在PC上收集文章，并将它们统一处理成一个特定结构的 `.json` 文件（包含文章列表，每篇文章有必需的标题、必需的链接、必需的文本内容），然后上传到用户的Google Drive。LumiRead 应用本身不负责此 `.json` 文件的生成过程。
2.  **Google Drive 集成:**
    * 通过 OAuth 2.0 安全连接到用户的 Google Drive 账户。
    * 授权后，允许用户浏览其 Google Drive 文件，选择指定的 `.json` 文章文件进行导入。
3.  **文章数据导入与处理:**
    * 下载选定的 `.json` 文件到应用本地存储。
    * 解析 `.json` 文件，提取文章列表及其包含的标题、链接和文本内容。
4.  **文章列表页:**
    * 以列表形式展示已导入文章的标题。
    * 每篇文章条目旁提供“对话”按钮，用于跳转到该文章的AI对话页。
    * 允许用户选择列表中的文章（用于发起批量总结）。
    * 提供访问原文链接的功能。
5.  **AI 文章批量总结:**
    * 用户可以在文章列表页选择一篇或多篇文章并发起批量总结。
    * 对选中的每篇文章的文本内容调用AI服务（使用用户在设置中配置的API Key和总结提示词）生成一个统一的、结构化的总结报告。该报告应力求包含如“主要内容”、“核心观点”、“关键细节”、“深度解读”等部分。
    * 批量总结的结果作为一个整体，显示在一个专门的“批量总结内容页”。
6.  **批量总结内容页:**
    * 用于展示某次批量总结操作后生成的完整结构化文本。
7.  **AI 内容问答页 (针对单篇文章):**
    * 用户从文章列表页选择某篇文章的“对话”按钮后，进入此页面。
    * AI将根据该选定文章的文本内容（使用用户在设置中配置的API Key）回答用户提问，并允许用户使用自定义的预设提示词。
    * 应用将提供一个简单的聊天界面进行此交互。
8.  **设置界面:**
    * Google Drive 账户连接/断开连接。
    * 配置AI服务的API Key。
    * 自定义批量总结的提示词（应引导AI生成期望的结构化输出）。
    * 自定义（增删改）用于AI对话的预设提示词列表。

### 3.2 范围之外 (Out of Scope - Future Considerations)
* PC端文章收集和 `.json` 文件生成的辅助工具。
* 高级文章编辑功能。
* 用户账户系统（除Google Drive OAuth外）。
* 多设备同步（除通过Google Drive手动导入外）。
* 复杂的文章组织功能（如标签、文件夹等，MVP阶段以简单列表为主）。
* 离线AI处理（MVP阶段依赖云端AI服务）。
* 分享摘要或与他人协作功能。
* 自定义AI模型选择（MVP阶段默认为一种，通过API Key指定）。
* 不支持DRM保护的文章。
* 对 `.json` 文件内文章链接有效性的深度校验和处理（MVP阶段假设链接基本有效）。
* 复杂的提示词版本管理或共享。
* 将批量总结的结构化内容精确地自动拆分并对应到每篇原始文章的详情中。
* 应用内导出功能（到云盘或剪贴板）。
* **iPhone版本的适配与开发 (MVP阶段专注于iPad)。**

## 4. 用户故事 (User Stories)

* **US001 (导入):** 作为一名iPad用户，我希望能从我的Google Drive导入包含多篇文章的 `.json` 文件，这样我就可以在iPad上管理和处理它们。
* **US002 (查看批量总结):** 作为一名iPad用户，在对选定文章进行批量总结后，我希望能在一个专门的页面查看AI为这些文章生成的统一的、结构化的总结报告，以便快速了解核心内容。
* **US003 (查看原文):** 作为一名iPad用户，在浏览文章列表或总结时，如果我想了解某篇文章的更多细节，我希望能通过该文章的链接在浏览器中轻松地跳转到原文。
* **US004 (AI问答):** 作为一名iPad用户，我希望能选择任意一篇文章，并在一个专门的页面就其原始内容向AI提问，这样我可以澄清疑问或深入探讨特定点。
* **US005 (账户连接):** 作为一名iPad用户，我希望能安全地连接我的Google Drive账户来导入文件。
* **US006 (文章列表):** 作为一名iPad用户，我希望能看到我导入的 `.json` 文件中所有文章的标题列表，方便我选择文章进行批量总结、查看原文或进行AI对话。
* **US007 (批量总结):** 作为一名iPad用户，我希望能选择列表中的多篇文章，并让AI一次性为它们生成一份统一的、结构化的总结报告。
* **US008 (配置API Key):** 作为一名iPad用户，我希望能配置我自己的AI服务API Key，以便应用可以调用AI功能。
* **US009 (自定义总结提示词):** 作为一名iPad用户，我希望能自定义用于批量总结的提示词，以获得更符合我需求的结构化摘要。
* **US010 (自定义对话预设提示词):** 作为一名iPad用户，我希望能自定义一些常用的对话提示词，方便在与AI就文章内容提问时快速使用。

## 5. 详细功能与特性 (Detailed Features & Functionality)

### 5.1 PC端内容准备 (Prerequisite - PC Side)
* **描述:** 用户需自行在PC端完成文章收集，并将所有文章数据整合到一个 `.json` 文件中。
* **要求:**
    * **JSON文件结构:**
        * 根元素应为一个JSON数组。
        * 数组中的每个元素是一个JSON对象，代表一篇文章。
        * 每篇文章对象应包含以下键 (key)：
            * `title` (String): 文章标题 (必需)。
            * `link` (String): 文章的原始URL链接 (必需)。
            * `content` (String): 文章的主要文本内容 (主要供AI使用，必需)。
        * 示例:
          ```json
          [
            {
              "title": "文章标题1",
              "link": "[http://example.com/article1](http://example.com/article1)",
              "content": "这是文章1的详细文本内容..."
            },
            {
              "title": "文章标题2",
              "link": "[http://example.com/article2](http://example.com/article2)",
              "content": "这是文章2的详细文本内容..."
            }
          ]
          ```
    * 用户需将此 `.json` 文件上传到其个人 Google Drive。
* **应用内不提供此 `.json` 文件的生成功能。**

### 5.2 Google Drive 集成 (Google Drive Integration)
* **描述:** 应用需能连接到用户的Google Drive以下载 `.json` 文章文件。
* **要求:** 同之前版本，保持不变。

### 5.3 文章数据导入与处理 (Article Data Import & Processing)
* **描述:** 将用户从Google Drive选择的 `.json` 文件下载并解析到应用本地。
* **要求:** 同之前版本，保持不变。

### 5.4 文章列表页 (Article List Page)
* **描述:** 应用的核心导航页面之一，用于展示和管理导入的文章。
* **要求:**
    * 使用本地数据库 (如 Core Data, Realm, or SQLite) 存储文章元数据（标题、链接、文本内容、导入日期等）。
    * 以列表形式清晰展示所有已导入文章的 `title`。
    * 每个列表项应包含：
        * 文章标题。
        * 一个“对话”按钮：点击后，传递该文章的`content`和`title`（或其他标识）到“AI内容问答页”。
        * （可选显示）一个快速访问原文链接的图标或操作。
    * 允许用户通过勾选等方式选择一篇或多篇文章。
    * 提供一个“批量总结”按钮，点击后将选定文章的`content`和用户配置的提示词发送给AI服务。
    * 允许用户删除已导入的 `.json` 文件及其包含的所有文章数据。
    * 用户从该页面可以导航到“批量总结内容页”（在批量总结完成后）和“AI内容问答页”。

### 5.5 AI 文章批量总结 (AI Article Batch Summarization)
* **描述:** 利用AI服务为用户选定的一批文章生成一个统一的、结构化的总结报告。
* **要求:**
    * 用户在“文章列表页”选择一篇或多篇文章后，点击“批量总结”按钮触发此功能。
    * 应用收集所有选定文章的 `content` 字段。
    * 将收集到的内容（可能需要进行拼接或特殊格式化处理，以适应AI模型的输入要求）以及用户在“设置界面”中定义的“批量总结提示词”发送到指定的AI服务API（使用用户配置的API Key）。
    * **提示词设计目标：** 引导AI生成包含特定结构部分的总结文本，例如：“主要内容”、“核心观点”、“关键细节”、“深度解读”等。
    * AI服务返回一个单一的文本块作为批量总结的结果。
    * 该结果文本不进行自动化的、与单篇文章的精确拆分或关联。
    * 批量总结的结果（包含上述结构化信息的完整文本）将被保存，并可在专门的“批量总结内容页”查看。
    * 处理AI服务调用失败或返回错误的情况，并向用户提供反馈。

### 5.6 批量总结内容页 (Batch Summary Content Page)
* **描述:** 应用的核心导航页面之一，用于展示AI对一批文章进行批量总结后生成的完整报告。
* **要求:**
    * 清晰、易读地展示某次批量总结操作后生成的完整文本内容（期望包含“主要内容”、“核心观点”等结构）。
    * 用户可以滚动查看整个总结报告。
    * （可选）显示该总结报告是针对哪些文章（或哪个批次）生成的。

### 5.7 AI 内容问答页 (AI Q&A / Chat Page - Per Article)
* **描述:** 应用的核心导航页面之一，允许用户就当前选定单篇文章的原始内容与AI进行对话。
* **要求:**
    * 用户从“文章列表页”中某篇文章的“对话”按钮进入此页面。
    * 页面应清晰标示当前对话针对的文章标题。
    * 打开一个类似聊天机器人的界面。
    * 用户可以输入文本问题。
    * AI对话界面应提供一个方式让用户快速选择或使用在“设置界面”中自定义的“预设提示词”。
    * 应用将用户的问题（或选择的预设提示词 + 用户可能的补充输入）以及当前文章的 `content`（可能是全文或关键部分，需优化token用量）发送到AI服务API（使用用户配置的API Key）。
    * AI服务返回答案，显示在聊天界面中。
    * 聊天历史（针对当前文章）应在会话期间保持可见。是否持久化存储聊天记录待定 (MVP可选)。
    * 优化传递给AI的上下文，以确保答案的相关性和控制API成本。

### 5.8 用户界面与用户体验 (UI/UX) 考量
* **页面导航:** 应用主要包含三个一级页面：文章列表页、批量总结内容页（可能以列表形式展示历次批量总结，点击后查看详情）、AI内容问答页。导航应清晰、便捷。
* **iPad优化:** 界面布局和交互应充分利用iPad的屏幕空间，例如可以考虑分栏视图（如左侧列表，右侧详情/对话）或更丰富的元素展示。
* **简洁直观:** 设计应遵循iPadOS人机界面指南，确保易用性。
* **反馈及时:** 对于耗时操作（如下载、AI处理），应提供适当的加载指示或进度反馈。
* **错误处理:** 友好地提示用户发生的错误及可能的解决方案。
* **性能:** 应用应响应流畅，避免卡顿，特别是在处理大的 `.json` 文件或与AI交互时。

### 5.9 设置界面 (Settings Interface)
* **描述:** 提供一个专门的界面供用户配置应用行为和AI交互参数。
* **要求:** 同之前版本，保持不变。但“批量总结提示词”的设计应考虑引导AI生成结构化输出。

## 6. 技术考量 (Technical Considerations - High-Level)

* **平台 (Platform):** iPadOS (Swift)。**初期MVP仅支持iPad。**
* **AI 服务 (AI Service):**
    * 需要集成第三方AI API (例如: OpenAI API - GPT系列, Google Gemini API)。
    * **API密钥管理：** 必须使用iOS Keychain等安全机制存储用户提供的API Key。
    * 考虑API的成本和使用限制。
* **Google Drive API:**
    * Google Sign-In for iOS SDK.
    * Google Drive REST API (for file listing and downloading if SDK不直接满足)。
* **本地数据存储 (Local Data Storage):**
    * Core Data, Realm, or SQLite for storing article data (title, link, content, etc.), user settings (prompts), **批量总结报告文本及元数据** (例如，关联的文章ID列表、生成日期), and potentially chat logs.
    * 文件系统存储下载的 `.json` 文件（临时或备份）。
* **JSON 解析 (JSON Parsing):** `Codable` protocol (Swift), `JSONSerialization` (Objective-C/Swift).
* **网络请求 (Networking):** URLSession for API calls. Consider libraries like Alamofire if preferred.
* **后台处理 (Background Processing):** Use background tasks for downloads and AI processing to avoid blocking the UI.
* **UI导航:** 考虑使用 `UISplitViewController` (对于iPad的多栏布局) 或 `UITabBarController`（如果这三个主要页面适合作为底部标签切换）或自定义导航方案。

## 7. 成功指标 (Success Metrics - Optional for MVP)

* **用户活跃度:** 日活跃用户 (DAU) / 月活跃用户 (MAU)。
* **功能使用率:** 文章导入频率、AI批量总结功能使用次数、AI问答功能使用次数、设置功能使用频率。
* **用户留存率:** 新用户次日、7日、30日留存率。
* **App Store 评分与评论:** 用户满意度的直接反馈。

## 8. 待定问题与未来迭代 (Open Questions & Future Considerations)

* **AI总结和问答的token限制和成本优化策略？** (特别是批量总结时，如何高效组合多篇文章内容并确保生成的结构化报告质量和完整性)
* **如何处理非常大的 `.json` 文件或单篇文章内容过长的情况？** (性能、内存和AI Token限制)
* **未来是否支持直接从URL列表批量抓取内容并生成 `.json`？**
* **错误收集和分析机制。**
* **详细的隐私政策和数据处理说明。**
* **用户选择多篇文章进行批量总结时，如何有效地管理API请求队列和反馈进度？**
* **设置中提示词的默认值和输入校验规则？如何更好地引导用户编写能产生结构化总结的提示词？**
* **“批量总结内容页”如何组织和展示多次批量总结的结果？** (例如，按日期、按批次命名等)
* **从“文章列表页”如何方便地找到某篇文章可能归属的“批量总结报告”？** (是否需要建立弱关联或允许用户手动关联)
* **未来iPhone版本的适配策略和UI差异化设计。**