# LumiRead iPad 应用开发待办事项

## Phase 1: 项目设置与基础架构

- [ ] **P1.1:** 初始化iPadOS项目 (Swift)
- [ ] **P1.2:** 设置基础应用导航：
    - [ ] 实现底部标签栏 (Tab Bar) 包含四个标签：文章列表, 内容总结, AI对话, 系统设置
    - [ ] 设置“文章列表”为默认首页
- [ ] **P1.3:** 本地数据存储方案选型与基础搭建 (Core Data)
    - [ ] 设计数据模型 (文章实体, 总结报告实体, 用户设置实体等)

## Phase 2: UI 开发 (基于PDD和HTML原型)

- [ ] **P2.1: 文章列表页 (Article List Page) UI**
    - [ ] **P2.1.1:** 实现导航栏 (应用标题, 从Google Drive导入按钮)
    - [ ] **P2.1.2:** 实现可滚动的文章列表区域
    - [ ] **P2.1.3:** 实现单个文章条目UI (复选框, 标题, 导入日期, “查看原文”按钮, “对话”按钮)
    - [ ] **P2.1.4:** 实现页面操作按钮工具栏 (“全部选中”, “一次选中5篇文章”, “批量总结选中文章”)
    - [ ] **P2.1.5:** 集成到底部标签栏
- [ ] **P2.2: 内容总结页 (Content Summary Page) UI**
    - [ ] **P2.2.1:** 实现导航栏 (页面标题)
    - [ ] **P2.2.2:** 实现总结内容显示区域 (支持滚动)
    - [ ] **P2.2.3:** 实现单个总结条目中文章标题的超链接功能 (链接到原文)
    - [ ] **P2.2.4:** 实现单个总结条目中文章标题旁的“对话”按钮
    - [ ] **P2.2.5:** 实现结构化总结文本的清晰展示 (如“主要内容”, “核心观点”等部分)
    - [ ] **P2.2.6:** 集成到底部标签栏
- [ ] **P2.3: AI对话页 (AI Chat Page) UI**
    - [ ] **P2.3.1:** 实现导航栏 (显示当前对话文章标题或“AI对话”)
    - [ ] **P2.3.2:** 实现聊天记录显示区域 (用户气泡, AI气泡)
    - [ ] **P2.3.3:** 实现预设提示词选择区域 (Checkbox形式, 支持多选, 横向滚动或平铺)
    - [ ] **P2.3.4:** 实现文本输入区域 (多行文本输入框, 发送按钮)
    - [ ] **P2.3.5:** 实现无活动对话时的引导信息展示
    - [ ] **P2.3.6:** 集成到底部标签栏
- [ ] **P2.4: 系统设置页 (System Settings Page) UI**
    - [ ] **P2.4.1:** 实现导航栏 (页面标题)
    - [ ] **P2.4.2:** 实现分组列表UI
    - [ ] **P2.4.3:** 实现Google Drive账户设置区域 (当前账户显示, 连接/切换/断开按钮)
    - [ ] **P2.4.4:** 实现AI服务配置区域 (API Key输入框与保存, 批量总结提示词输入框与保存/恢复默认)
    - [ ] **P2.4.5:** 实现AI对话预设提示词管理区域 (列表展示, 添加/编辑/删除功能)
    - [ ] **P2.4.6:** 集成到底部标签栏
- [ ] **P2.5:** 实现通用UI元素 (加载指示器, 空状态提示等)
- [ ] **P2.6:** 应用整体视觉风格调整与优化 (符合清新主义美学, iPad优化)

## Phase 3: 核心逻辑与功能实现

- [ ] **P3.1: Google Drive 集成**
    - [ ] **P3.1.1:** 实现OAuth 2.0授权流程 (使用 Google Sign-In SDK)
    - [ ] **P3.1.2:** 实现Google Drive文件选择器 (筛选 `.json` 文件)
    - [ ] **P3.1.3:** 安全存储和管理Access Token/Refresh Token (使用iOS Keychain)
- [ ] **P3.2: 文章数据导入与处理**
    - [ ] **P3.2.1:** 实现从Google Drive下载选定的 `.json` 文件
    - [ ] **P3.2.2:** 实现JSON文件解析与数据提取 (校验`title`, `link`, `content`字段)
    - [ ] **P3.2.3:** 将解析后的文章数据保存到本地数据库
    - [ ] **P3.2.4:** 实现导入过程中的错误处理和用户反馈
- [ ] **P3.3: 本地文章管理 (文章列表页逻辑)**
    - [ ] **P3.3.1:** 从本地数据库加载并显示文章列表
    - [ ] **P3.3.2:** 实现文章复选框选择逻辑 (单选, 全部选中, 一次选中5篇)
    - [ ] **P3.3.3:** 实现删除已导入的 `.json` 文件及其关联的所有文章数据的功能
    - [ ] **P3.3.4:** 实现“查看原文”按钮逻辑 (使用文章`link`在浏览器中打开)
    - [ ] **P3.3.5:** 实现“对话”按钮逻辑 (导航到AI对话页并传递文章上下文)
- [ ] **P3.4: AI 文章批量总结功能**
    - [ ] **P3.4.1:** 收集文章列表页选中的文章`content`
    - [ ] **P3.4.2:** 从设置中获取API Key和“批量总结提示词”
    - [ ] **P3.4.3:** 构建AI服务API请求 (组合多篇文章内容和提示词)
    - [ ] **P3.4.4:** 调用AI服务API并处理返回的单一文本块总结报告
    - [ ] **P3.4.5:** 将批量总结报告保存到本地数据库 (可关联批次信息)
    - [ ] **P3.4.6:** 在“内容总结页”显示该报告 (包括结构化展示和交互元素)
    - [ ] **P3.4.7:** 实现批量总结过程中的错误处理和用户反馈
- [ ] **P3.5: AI 内容问答功能 (AI对话页逻辑)**
    - [ ] **P3.5.1:** 加载当前对话文章的`content`
    - [ ] **P3.5.2:** 处理用户在输入框的文本输入
    - [ ] **P3.5.3:** 处理用户选择的多个预设提示词
    - [ ] **P3.5.4:** 从设置中获取API Key
    - [ ] **P3.5.5:** 构建AI服务API请求 (组合文章`content`, 用户问题, 预设提示词)
    - [ ] **P3.5.6:** 调用AI服务API并处理返回的回答
    - [ ] **P3.5.7:** 在聊天界面更新对话气泡
    - [ ] **P3.5.8:** (可选MVP+) 实现聊天历史的本地持久化存储与加载
    - [ ] **P3.5.9:** 实现AI对话过程中的错误处理和用户反馈
- [ ] **P3.6: 系统设置功能逻辑**
    - [ ] **P3.6.1:** 实现Google Drive账户连接/断开逻辑
    - [ ] **P3.6.2:** 实现API Key的保存 (到Keychain) 和读取逻辑
    - [ ] **P3.6.3:** 实现批量总结提示词的保存、读取和恢复默认逻辑
    - [ ] **P3.6.4:** 实现AI对话预设提示词的增、删、改、查逻辑 (保存到本地数据库)

## Phase 4: 测试、优化与收尾

- [ ] **P4.1:** UI/UX细节打磨和微交互实现
- [ ] **P4.2:** 性能测试与优化 (特别是处理大JSON文件, 长列表滚动, API请求响应)
- [ ] **P4.3:** 全面的错误处理和用户反馈机制完善
- [ ] **P4.4:** 可访问性功能测试与改进 (VoiceOver, 动态字体等)
- [ ] **P4.5:** 编写单元测试和UI测试用例
- [ ] **P4.6:** 进行多轮内部测试和Bug修复
- [ ] **P4.7:** 准备App Store提交相关材料 (截图, 描述, 隐私政策等 - 如果计划上架)
- [ ] **P4.8:** 最终构建与打包

